<ion-header>
  <ion-toolbar color="success">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/login"></ion-back-button>
    </ion-buttons>
    <ion-title>Reset Password</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="container">

    <!-- Icon floating -->
    <div class="email-icon-figma">
      <ion-icon name="mail"></ion-icon>
      <!-- <img src="assets/mail_blue.svg" alt="email-icon" /> -->
    </div>

    <!-- Main card -->
    <div class="reset-card">
      <p class="desc">
        Silakan masukkan alamat email anda, kami akan mengirimkan link verifikasi agar anda bisa mengubah password anda.
      </p>

      <!-- gunakan reactive form sesuai TS -->
      <form [formGroup]="form" (ngSubmit)="sendVerification()">
        <div class="input-field" [class.error]="showExpiredNotice">
          <ion-icon name="mail-outline" class="input-icon"></ion-icon>
          <input
            type="email"
            placeholder="Masukkan email anda di sini"
            formControlName="email"
            (input)="onInput()"
            [readonly]="step > 1"
          />
        </div>

        <!-- red expiry note (step 3) -->
        <div *ngIf="showExpiredNotice" class="expired-note">
          Silahkan periksa email anda, link akan kedaluwarsa dalam 1 jam.
        </div>

        <button
          class="btn-verify"
          [class.disabled]="!canSubmit || loading"
          [disabled]="!canSubmit || loading"
          type="submit"
        >
          Verifikasi email
        </button>
      </form>

      <!-- helper text (step 2) -->
      <div *ngIf="step === 2" class="helper-confirm">
        Kami telah mengirim link verifikasi ke <strong>{{ form.value.email }}</strong>
      </div>
    </div>

  </div>
</ion-content>
