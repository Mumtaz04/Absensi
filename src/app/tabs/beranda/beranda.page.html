<ion-header>
  <ion-toolbar color="success">
    <ion-title class="header-title">Beranda</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="beranda-content">

  <!-- ===============================
       ðŸŒ¿ Profile Card (dengan foto & info)
  =============================== -->
  <div class="profile-card" *ngIf="user; else loadingProfile">
    <div class="profile-row">
      <!-- Foto profil -->
      <img
        [src]="getUserPhotoUrl() || 'assets/img/default-profile.png'"
        (error)="onPhotoError($event)"
        alt="Foto Profil"
        class="profile-photo"
      />

      <!-- Info pengguna -->
      <div class="profile-info">
        <h2>{{ user?.name || 'Nama tidak tersedia' }}</h2>
        <p class="email">{{ user?.email || '-' }}</p>
        <p class="jabatan">
          Jabatan: <span>{{ user?.position || '-' }}</span>
        </p>
        <p class="status">
          Status: <span>{{ user?.status || '-' }}</span>
        </p>
      </div>
    </div>

    <div class="profile-divider"></div>

    <ion-item button detail="true" (click)="goToProfile()">
      <ion-label>Detail Profil</ion-label>
    </ion-item>
  </div>

  <!-- ðŸ”„ Tampilan saat user belum termuat -->
  <ng-template #loadingProfile>
    <div class="profile-loading">
      <ion-spinner name="crescent" color="success"></ion-spinner>
      <p>Memuat profil...</p>
    </div>
  </ng-template>

  <!-- ===============================
       ðŸ“„ Menu Izin & Riwayat
  =============================== -->
  <div class="dashboard-card">
    <ion-card class="izin-card" (click)="goToPengajuanIzin()">
      <div class="izin-card-content">
        <div class="izin-left">
          <ion-icon name="document-text-outline"></ion-icon>
          <span>Pengajuan Izin</span>
        </div>
        <ion-icon name="chevron-forward-outline" class="arrow-icon"></ion-icon>
      </div>
    </ion-card>

    <ion-card class="izin-card" (click)="goToRiwayatIzin()">
      <div class="izin-card-content">
        <div class="izin-left">
          <ion-icon name="time-outline"></ion-icon>
          <span>Riwayat Izin</span>
        </div>
        <ion-icon name="chevron-forward-outline" class="arrow-icon"></ion-icon>
      </div>
    </ion-card>
  </div>

  <!-- ===============================
       â° Presensi Hari Ini
  =============================== -->
  <ion-card class="presensi-card">
    <div class="presensi-header">
      <h3>Presensi Hari Ini</h3>
      <ion-icon name="alert-circle-outline" class="alert-icon"></ion-icon>
    </div>

    <div class="presensi-body">
      <div class="presensi-col">
        <div class="circle">-- : --</div>
        <div class="waktu-label">Waktu Masuk</div>
      </div>
      <div class="presensi-col">
        <div class="circle">-- : --</div>
        <div class="waktu-label">Waktu Keluar</div>
      </div>
    </div>

    <div class="status-text">
      Status: <span class="belum-presensi">belum presensi</span>, mohon presensi sekarang
    </div>
  </ion-card>

  <!-- ===============================
       ðŸ“Š Statistik Bulanan
  =============================== -->
  <ion-card class="statistik-card">
    <h3>Statistik Bulanan</h3>

    <div class="stat-row">
      <div class="top-info">
        <span class="label">Hadir</span>
        <span class="count">20 hari</span>
      </div>
      <div class="bar-wrapper">
        <div class="bar hadir" style="width: 80%;"></div>
      </div>
    </div>

    <div class="stat-row">
      <div class="top-info">
        <span class="label">Terlambat</span>
        <span class="count">5 hari</span>
      </div>
      <div class="bar-wrapper">
        <div class="bar terlambat" style="width: 25%;"></div>
      </div>
    </div>

    <div class="stat-row">
      <div class="top-info">
        <span class="label">Cuti</span>
        <span class="count">2 hari</span>
      </div>
      <div class="bar-wrapper">
        <div class="bar cuti" style="width: 10%;"></div>
      </div>
    </div>

    <div class="stat-row">
      <div class="top-info">
        <span class="label">Alfa</span>
        <span class="count">1 hari</span>
      </div>
      <div class="bar-wrapper">
        <div class="bar alfa" style="width: 5%;"></div>
      </div>
    </div>
  </ion-card>

</ion-content>
