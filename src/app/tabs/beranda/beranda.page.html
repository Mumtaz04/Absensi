<ion-header class="no-border">
  <!-- Ganti toolbar default dengan header custom -->
</ion-header>

<ion-content [fullscreen]="true" class="beranda-content">

  <!-- ðŸŒ¿ Header Hijau Lengkung -->
  <div class="header-green">
    <h1 class="header-title">Selamat Datang</h1>
    <p class="header-subtitle">Dashboard Presensi</p>
  </div>

    <!-- ðŸ‘¤ Kartu Profil -->
    <!-- âœ… Card Profil â€” seluruh card bisa diklik -->
    <div class="profile-card" (click)="goToProfile()">
      <div class="profile-header">
        <img [src]="userPhotoUrl" (error)="onPhotoError($event)" alt="Foto Profil" class="profile-photo" />
      <div class="profile-info">
        <h2>{{ user?.name || 'Nama User' }}</h2>
        <p>{{ user?.position || 'Jabatan' }}</p>
        <p>{{ user?.email || 'email@example.com' }}</p>
      </div>
    </div>

    <!-- Tombol tetap kelihatan tapi tidak klik terpisah -->
      <!-- <ion-button expand="block" fill="outline" class="detail-btn">Detail Profil</ion-button> -->
    </div>

  <!-- ðŸ”„ Loading -->
  <ng-template #loadingProfile>
    <div class="profile-loading">
      <ion-spinner name="crescent" color="success"></ion-spinner>
      <p>Memuat profil...</p>
    </div>
  </ng-template>

  <!-- ðŸ“„ Menu Dua Kotak -->
  <div class="izin-section">
    <div class="izin-card yellow" (click)="goToPengajuanIzin()">
      <ion-icon name="document-text-outline"></ion-icon>
      <span>Pengajuan Izin</span>
    </div>

    <div class="izin-card purple" (click)="goToRiwayatIzin()">
      <ion-icon name="time-outline"></ion-icon>
      <span>Riwayat Izin</span>
    </div>
  </div>
  <!-- <div class="notif-dot"></div> -->

  <!-- â° Presensi -->
  <!-- CARD STATUS PRESENSI -->
  <!-- CARD PRESENSI -->
  <div class="presensi-card">
    <div class="presensi-header">
      <h3>Status Hari Ini</h3>

      <!-- Badge Dinamis -->
      <span class="status-badge"
        [ngClass]="{
          'belum': statusPresensi.status === 'belum',
          'hadir': statusPresensi.status === 'hadir_tepat' || statusPresensi.status === 'hadir_telat',
          'selesai': statusPresensi.status === 'selesai'
        }"
      >
        {{ 
          statusPresensi.status === 'belum' 
            ? 'Belum Presensi' 
            : (statusPresensi.status === 'selesai' 
                ? 'Selesai' 
                : 'Hadir')
        }}
      </span>
    </div>

    <!-- Box Check In / Out -->
    <div class="presensi-body">
      <div class="presensi-box-group">
        <div class="presensi-box masuk">
          <h2>{{ statusPresensi.jamCheckin || '--:--' }}</h2>
        </div>
        <span class="presensi-label">Check In</span>
      </div>

      <div class="presensi-box-group">
        <div class="presensi-box keluar">
          <h2>{{ statusPresensi.jamCheckout || '--:--' }}</h2>
        </div>
        <span class="presensi-label">Check Out</span>
      </div>
    </div>

    <p class="presensi-message"
      [ngClass]="{
        'warning': statusPresensi.status === 'belum',
        'tepat': statusPresensi.status === 'hadir_tepat',
        'telat': statusPresensi.status === 'hadir_telat',
        'selesai': statusPresensi.status === 'selesai'
      }">
      {{ statusPresensi.pesan }}
    </p>
  </div>



  <!-- ðŸ“Š Statistik -->
  <ion-card class="statistik-card">
    <h3>Statistik Bulanan</h3>
    <div class="stat-row" *ngFor="let stat of [
      { label: 'Hadir', count: '20 hari', class: 'hadir', width: '80%' },
      { label: 'Terlambat', count: '5 hari', class: 'terlambat', width: '25%' },
      { label: 'Cuti', count: '2 hari', class: 'cuti', width: '10%' },
      { label: 'Alfa', count: '1 hari', class: 'alfa', width: '5%' }
    ]">
      <div class="stat-top">
        <span>{{ stat.label }}</span>
        <span>{{ stat.count }}</span>
      </div>
      <div class="bar-bg">
        <div class="bar {{ stat.class }}" [style.width]="stat.width"></div>
      </div>
    </div>
  </ion-card>

</ion-content>





  <!-- <img
    [src]="userPhotoUrl"
    alt="Foto Profil"
    class="profile-photo"
  /> -->